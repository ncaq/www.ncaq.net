---
title: systemdを使ってサーバーで優先度を低くしてBitZenyを採掘する方法
---

手元のwebサーバ兼ルータもCeleronですが,
一応CPUが存在していて,
BitZenyはCPUでもそこそこ掘れるので設定してみました.

しかしこのサーバの本懐はマイニングではないので,
あくまでCPUが空いている時にのみ動かしたい.

普通にsystemdのユニットファイルのNice値を設定することで可能のようでした.

~~~
[Unit]
After=network.service

[Service]
ExecStart=/home/ncaq/.local/bin/minerd 省略
Nice=19

[Install]
WantedBy=multi-user.target
~~~

一応これで他のプロセスに譲ることは行っているようです.

しかし,
Nice値を調整して他のプログラムを動かしていてもCPUは普通に使うし,
他のプロセスにも影響があるようなので,
やはりこのサービスを動かすのはやめました.

採掘量もデスクトップPCが10khash/sに対してサーバは1khash/sぐらいしか稼げませんし.

もっとサーバのアイドル時間が長い,
例えば録画サーバなどだったら使っていたかもしれませんが…

あとCPUのパワーがあまりにも不足しています.
Celeron G1820だからまあ仕方がないですね.

もっと手の込んだ感じで,
CPU使用率が低ければ起動して,
他のプログラムがCPUを少しでも使ったらマイニングを中止するようなデーモンを書けば良いのかもしれません.

しかしminerdだけを除いたCPU使用率を取得する方法がわからない.
誰か教えてください.
