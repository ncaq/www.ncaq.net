---
title: 今関わっているシステムにGoogleアドセンスを導入しました
---

今関わっているシステムにGoogleアドセンスの配置をしています.
このサイトではないです.

と言っても審査とかpull requestとかしたのは別の人なので,私はたいした作業を行っていないのですが.

デフォルトで表示されているコードが`<script>`の読み込みありで,`<head>`で既に読み込んでいるのにこれ要るのか?という感じになっているのでとりあえずステージング環境で外して確かめてみようということにしました.

対象のブランチがpull requestのブランチでoriginリモートのブランチではないので`git checkout`の候補に出なかったので困惑して基礎的な所をググり直してます.

`git fetch`で対象のremoteを明示的に選択すれば問題ありませんでした.
`git fetch -pa`してたからこれで良いのかと思っていました.
man見たら`git fetch`の`-a`オプションは`--append`のショートカットで`--all`のショートカットではなかった,なるほど.

ステージング環境を少しの間使っていなかったのでlts-9.5のビルドに多少時間がかかることになりました.

問題は`adsbygoogle.push`が広告ユニットごとに必要かどうかなんですよね,私は`<head>`で一度それは行っているので不要だと思って取り外してみたのですが,なんか広告表示されないですね…
`<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>`を追加してみたら表示されたので,私が間違っていたことがわかりました,pushで表示しろという命令を出すみたいですね.

それにしても,広告を追加すると随分とwebサイトが重くなってしまうことがわかりました.
やはり広告は悪い文明,粉砕する!(広告を追加しながら)

まあ,私はGoogleアドセンスを素朴に追加しているだけなので,広告ブロックツールで簡単にオプトアウト出来るようになっています.
そんなに悪いことはしていないでしょう.
重くなると行ってもasyncで広告を追加しているので,ローディング完了が遅くなるだけでページのファーストビューは遅くなってませんしね.

しかしこういう`<script>`を直後に追加する仕組みだと,ReactみたいなJavaScriptでHTMLを描画するアプリケーションだとどう処理するんだろうと思って調べてみたら
[ReactJS Adsense Component](https://blog.chendry.org/2015/07/20/reactjs-adsense-component.html)
みたいに`componentDidMount`するたびに`push`を実行するみたいですね.
重くないか…それ?

Googleアドセンスを使用するときは広告であることを明示しないと規約違反になるという話が色んな所に書いてありますが,[広告の配置に関するポリシー - AdSense ヘルプ](https://support.google.com/adsense/answer/1346295?hl=ja&vid=0-928294922705-1507532272354)を見る限り,広告の上にラベルを表示するなら｢広告｣以外は許可しないというだけで,ラベルをそもそも置かない場合は大丈夫に思えますね.

これ見てたら

> 動的コンテンツ（チャット、インスタントメッセージ、自動更新コメントなど）がページの主な要素となっているページには Google 広告を表示できません。

とか書いているのでReactを使用するページにGoogleアドセンス使って大丈夫か?と思いました.
**動的コンテンツ**の定義次第ですけど,この書き方だとWebアプリケーション全部アウトになりそうなんですがどうなんですか?
例が載ってないのでなんとも言えない.
まあ私がやってるシステムでは接触することは多分無いのですけど,将来的にBBSを作ってみたりした時にGoogleアドセンスを載せても良いのかわからないですね.

[動的に生成されたページ用の AdSense コード - AdSense ヘルプ](https://support.google.com/adsense/answer/2806011?hl=ja)を見てみると,規約違反というよりも技術的に困難な箇所があるので気をつけて欲しいって意味なんでしょうかね?

ところで私は今ublock originを使っているのですが,広告システムをブロックしているとGoogleアドセンスの管理コンソールがエラーを起こして不可思議な挙動をするようになっています.
もちろんublock originはホスト別に機能を無効化することが出来るのですが,
Googleアドセンスのツールはgoogle.comに存在しているのでこのURL上でublock originを無効化するとソフトウェアを検索した時にニセダウンロードサイトとかが表示されて心理的に嫌だなあと思ってました.
しかし実際やってみたら検索ページはgoogle.co.jpに存在するので問題ありませんでした.
良かった.

自分自身が広告ブロックを使っているのにGoogleアドセンスを導入する仕事をしていることを矛盾した態度だと思う方も居るかもしれせん.
しかし私はこの態度を矛盾していないと思っています.
私は広告が嫌いだから広告ブロックを導入していますが,広告ブロックを導入していない人はそんなに広告が嫌いじゃないと思っています.
例えば私はカニとエビが嫌いですが,人にカニとエビを売りつける仕事をするとしても何ら罪悪感は感じないでしょう.
あと｢ブロック解除してくれ｣という画像を見たらなるべくそのサイトでは解除しています,InfoQとか.
そういう所はあまり悪質な広告は出さないイメージがありますからね.
控えめな広告をブロックしないブロッカーにも割と賛成しています,利権が絡んでしまうのは問題だと思いますが,広告全部を消したいほどパラノイアでもないので.

ちなみに,Androidスマートフォンで広告ブロックをしたい人は

* [Firefox for Android](https://www.mozilla.org/ja/firefox/android/)をインストールする
* [uBlock Origin :: Firefox 向けアドオン](https://addons.mozilla.org/ja/firefox/addon/ublock-origin/)をアドオンに追加する
* 外部フィルターから*JPN: ABP Japanese filters (日本用フィルタ)*​は誤爆が多いので取り外す
* [280blocker | モバイル広告ブロック](https://280blocker.net/)を導入する

という手順を踏むと良いです.
私はそうしています.
iOSは使ってないから知らないです.

私のサイトにも,もう一度Googleアドセンス導入チャレンジをしてみようと思います.
今のアクセス数からしてあんまり収益化は期待できませんし期待する気持ちもありませんが,技術的に好き勝手やれる環境が欲しくなってきました.
業務で適当なことは流石に出来ないので…

と思って個人用のGoogleアドセンスアカウントを作ろうとしたのですが,運営者IDはGoogleアカウントに1つという情報が出てきました.
通常の場合は個人でアカウントを使用するのでそれでも良いのでしょうが,私の場合,業務の運営者IDにGoogleアカウントが追加されて,その運営者IDでは支払先が社の方になっています.
流石に支払先が社になっている運営者IDに私のサイトの広告を追加するのは出来ないのですが,どうすれば良いのです.

今はまだ私のサイトにGoogleアドセンスを追加出来ないだけなので良いけれど,バイト首になったらこれどう処理するんでしょう…

別のGoogleアカウントでGoogleアドセンスを開始するしかない状況にハマってしまったのかもしれません.
と思ったらGoogleアドセンスアカウントは複数持ってはいけないらしく,完全に詰んでいるのでは?

と思いましたが法人が異なる場合は複数あっても良いらしいですね.

> もし会社がそれぞれ別の名義で法人になってるなら，それぞれ別のアカウントを持てますよ。
>
> [Google Adsenseで，複数のIDをサイト別に使い分けは不可能。同一IDの広告コードを使うしかない - モバイル通信とIT技術をコツコツ勉強するブログ](http://computer-technology.hateblo.jp/entry/20140505/p4)

バイト先の社長に,ncaq@ncaq.netをGoogleアドセンスから削除して会社のドメインのGoogleアカウントをアドセンスに追加してくれと言ってみたらうまくいきました.
良かった良かった.

またGoogleアドセンス審査チャレンジしてみましょう.

システムに*ページ単位の広告*でQuickStart広告を追加してみたらアホほど広告が増えました.
UXをそ阻害しまくっているので,これで収益が無かったらキレる.

今日は昨日の登山で非常に疲れたので仕事時間まで起きれなかったり,かなり雑になってしまいました.
疲れすぎてゲームをする気力もあんまり湧きませんし,火曜日は1限からですし,明日に備えてゲームせずにアニメ見てラノベ読むぐらいにして適当に過ごしましょう.
