---
title: Google カスタム検索を導入して, その進化に驚いた
---

* Google カスタム検索を導入した
* 今のカスタム検索は進化していてwebサイトに統合できる

# 背景

[ブログ記事からタグデータを削除した,そもそもブログにタグは不要 - ncaq](https://www.ncaq.net/2016/11/08/)に書いてあるように,このサイトにタグだのカテゴリだのの区分けはない.
要するに,テキストが主体のサイトなのだから,全文検索すればいいだろと考えている.

しかしgoogleの検索クエリに`site:www.ncaq.net`を付ければ,私のサイトだけを検索することが出来るということを知っている人は多くはないだろう.

なので,Google カスタム検索を導入することにした.

# 参考

* [Google カスタム検索](https://cse.google.co.jp/cse/compare)
* [カスタム検索 ヘルプ](https://support.google.com/customsearch/)
* [Google カスタム検索の導入方法](http://so-zou.jp/web-app/tech/search-engine/google/site-search/custom-search.htm)

# 昔より進化していた

Google カスタム検索の存在は,webを使い始めた頃から知っていた.
そのイメージは,単に検索クエリに`site:www.ncaq.net`をつけたのと同じgoogle検索結果が表示される,ただそれだけであった.

それで十分だと考えていたが,私は今のGoogle カスタム検索が大きく進化していることを知った.
そして驚いた.

今のGoogle カスタム検索は,大きく分けて以下の3つに分類される.

* googleからの応答をモーダルウインドウで表示する
* googleからの応答をページに途中に挿入する
* googleに飛ばす(従来のイメージ)

私は従来のgoogleに飛ばす方式しか知らなかったので,シームレスに検索が出来るようになっていたことに驚愕した.

以前同級生に｢独自の検索システムは8割は無駄,googleカスタム検索の方が大概使いやすい｣と言ったら｢でもデザイン的に手抜きっぽいし嫌だなあ｣と返されたことがある.
しかしこの表示方式ならば,デザインを損なうこともない.

色もちゃんとカスタマイズできるので[Solarized](http://ethanschoonover.com/solarized)で統一されるようにgoogleをカスタマイズすることができた.

導入も比較的簡単で,html要素を追加するだけだ.
私のwebサイトならばこうである.

~~~html
<div class="gcse-search"></div>
<script async src="https://cse.google.com/cse.js?cx=004447714709742723527:gfxoo7p4yao"></script>
~~~

今のGoogle カスタム検索には概ね満足している.

# Google カスタム検索のダメなところ

* 検索フォームのデザインがクソ,`<table>`でレイアウトを組むな,透過gifを使うな
* 検索フォームの読み込みが遅い
* enterでは検索できるけどC-mでは検索できない
* 広告がデカイ

# Google Site Search

Google カスタム検索の問題点は,企業向けの有料バージョンであるGoogle Site Searchを使えば概ね解決できるはずだ.
このサイトに年間 100 米ドルを払うことは出来ないし,やる意味もないからこのサイトで使うことはないが.

収益が出る真面目なシステムを構築するならば,是非Google Site Searchを使いたい.

独自の検索エンジンを使ったシステムは概ねクソである.
最近は[npm](https://www.npmjs.com/)を特にクソだと感じた.
ランク付けがまるでなっていない.
見たいパッケージが全く上位に出てこない.

関連度や人気度を考慮した適切な全文検索エンジンを構築できるほどの,プログラマと数学者と統計学者を雇えるほどの資金力を持っている企業以外は,Google Site Searchを導入するのが正しい選択肢である.
そうでなければ,ユーザは結局googleに`site:`を打ち込むことになる.

Bing Search APIはGoogleより少し安いらしいので,こちらを使うのもありかもしれない.
