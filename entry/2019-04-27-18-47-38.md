---
title: Emacsã§tslintãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯tslint, eslintã«ç§»è¡Œã—ãŸã‚‰ã—ããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯eslintãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
updated: 2019-05-21T16:19:26+09:00
---

TypeScriptã§ã¯ä»Šå¾ŒESLintãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ.

[TypeScript on ESLint ã®æœªæ¥ - Qiita](https://qiita.com/mysticatea/items/aaf677928e965abe093d)

ãã‚Œè‡ªä½“ã®è¨­å®šã¯ä»¥ä¸‹ã§ã™.

[\@typescript-eslint ã“ã¨ã¯ã˜ã‚ - teppeis blog](https://teppeis.hatenablog.com/entry/2019/02/typescript-eslint)

ã¡ãªã¿ã«ç§ã¯

~~~json
"extends": ["plugin:@typescript-eslint/recommended"]
~~~

ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã¾ã™.

ã¾ãŸ
[fathyb/parcel-plugin-typescript: ğŸš¨ Enhanced TypeScript support for Parcel](https://github.com/fathyb/parcel-plugin-typescript)
ã‚’å°å…¥ã—ã¦parcelãŒãƒ“ãƒ«ãƒ‰æ™‚ã«å‹ã‚¨ãƒ©ãƒ¼ã‚’å ±å‘Šã™ã‚‹ã‚ˆã†ã«â€¦
å‡ºæ¥ã‚Œã°è‰¯ã‹ã£ãŸã‚“ã§ã™ãŒã©ã†ã‚‚ã“ã‚Œã†ã¾ãå‹•ã‹ãªã„ã‚ˆã†ã§ã™ã­.

# tslintã¨eslintã®å…±å­˜

ã—ã‹ã—æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã¾ã ã¾ã tslintã‚’ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ãŒå¤šã„ã§ã™.
ã„ãšã‚Œç§»è¡Œã—ã¦ã„ãã¨ã—ã¦,
ã²ã¨ã¾ãšã¯tslintãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯tslintã‚’ä½¿ã£ã¦,
ç§»è¡Œã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯eslintã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ã¦æ¬²ã—ã„ã§ã™ã­.

ã¨ã„ã†ã‚ã‘ã§ç§ã®Emacså‘ã‘ã«ã¡ã‚‡ã£ã¨ã—ãŸè¨­å®šã‚’æ›¸ãã¾ã—ãŸ.

~~~elisp
(with-eval-after-load 'web-mode
  (with-eval-after-load 'eglot
    (add-to-list 'eglot-server-programs (cons 'web-mode (cdr (assoc '(js-mode typescript-mode) eglot-server-programs))))))

(defun prettier-js-mode-enable ()
  (interactive)
  (prettier-js-mode t))

(flycheck-add-mode 'html-tidy 'web-mode)
(flycheck-add-mode 'javascript-eslint 'web-mode)
(flycheck-add-mode 'typescript-tslint 'web-mode)

(flycheck-add-mode 'javascript-eslint 'typescript-mode)

(defun flycheck-select-tslint-or-eslint ()
  "tslintãŒä½¿ãˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã¨tslintã‚’æœ‰åŠ¹åŒ–ã—ã¦,ãã‚Œä»¥å¤–ã§ã¯eslintã‚’æœ‰åŠ¹åŒ–ã™ã‚‹"
  (if (and
       ;; å¤§å‰æã¨ã—ã¦tslint.jsonãŒãªã„ã¨ã ã‚
       (locate-dominating-file default-directory "tslint.json")
       (or
        ;; ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ãŒTypeScriptãªã‚‰è‰¯ã„
        (equal major-mode 'typescript-mode)
        ;; ãã‚Œä»¥å¤–ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰(web-modeã¨ã‹)ã§ã‚‚æ‹¡å¼µå­ãŒts, tsxãªã‚‰è‰¯ã„
        (member (file-name-extension (buffer-file-name)) '("ts" "tsx"))))
      (flycheck-select-checker 'typescript-tslint)
    (when (executable-find "eslint")
      (progn
        (flycheck-select-checker 'javascript-eslint)
        (add-hook 'after-save-hook 'eslint-fix nil t)))))

(defun web-mode-setting ()
  (cond
   ((string= web-mode-content-type "html")
    (progn
      (prettier-js-mode-enable)
      (when (executable-find "tidy") (flycheck-select-checker 'html-tidy))))
   ((member web-mode-content-type '("javascript" "jsx"))
    (progn
      (eglot-ensure)
      (flycheck-select-tslint-or-eslint))))
  (when (member web-mode-content-type '("css" "javascript" "json" "jsx"))
    (prettier-js-mode-enable)))

(add-hook 'web-mode-hook 'web-mode-setting)

(add-hook 'typescript-mode-hook 'eglot-ensure)
(add-hook 'typescript-mode-hook 'flycheck-select-tslint-or-eslint)
~~~

ç§ã¯tsxã«ã¯JSXè¨˜æ³•ã®è¦‹æ˜“ã•ã®ãŸã‚ã«web-modeã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§å°‘ã—è¤‡é›‘ã«ãªã‚Šã¾ã—ãŸ.

ã¤ã„ã§ã«eglotã§
[sourcegraph/javascript-typescript-langserver: JavaScript and TypeScript code intelligence through the Language Server Protocol](https://github.com/sourcegraph/javascript-typescript-langserver)
ã‚’ä½¿ã†ã‚ˆã†ã«æœ‰åŠ¹ã«ã—ã¦ãŠãã¾ã™.

[Tide](https://github.com/ananthakumaran/tide)
ã®å½¹ç›®ã¯çµ‚äº†ã§è‰¯ã„ã§ã—ã‚‡ã†.
ã“ã‚Œã¾ã§ãŠä¸–è©±ã«ãªã‚Šã¾ã—ãŸ.
